<?xml version="1.0"?>

<!--
  Copyright (C) Igor Sysoev
  Copyright (C) Nginx, Inc.
  -->

<!DOCTYPE module SYSTEM "../../../../dtd/module.dtd">

<module name="Module ngx_http_headers_module"
        link="/cn/docs/http/ngx_http_headers_module.html"
        lang="cn"
        translator="allisstone"
        rev="1">

<section id="summary">

<para>
<literal>ngx_http_headers_module</literal> 模块允许发出
 <header>Expires</header> 和 <header>Cache-Control</header> 
响应头，并将任意域添加到响应头。
</para>

</section>


<section id="example" name="Example Configuration">

<para>
<example>
expires    24h;
expires    modified +24h;
expires    @24h;
expires    0;
expires    -1;
expires    epoch;
add_header Cache-Control private;
</example>
</para>

</section>


<section id="directives" name="Directives">

<directive name="add_header">
<syntax><value>name</value> <value>value</value></syntax>
<default/>
<context>http</context>
<context>server</context>
<context>location</context>

<para>
当响应代码等于200, 204, 206, 301, 302, 303, 304, 或者307，增加指定域到响应头。
值中可以包含变量。
</para>

</directive>


<directive name="expires">
<syntax>[<literal>modified</literal>] <value>time</value></syntax>
<syntax>
    <literal>epoch</literal> |
    <literal>max</literal> |
    <literal>off</literal></syntax>
<default>off</default>
<context>http</context>
<context>server</context>
<context>location</context>

<para>
启用或禁用增加或者修改 <header>Expires</header>
和 <header>Cache-Control</header> 响应头。
参数正负均可。
<link doc="../syntax.xml">time</link>.
</para>

<para>
<header>Expires</header> 域里的时间可以由当前时间
<value>time</value> 和指令里指定的时间求和来算出。
如果使用了 <literal>modified</literal> (参数0.7.0, 0.6.32)，
那么时间由文件修改时间和
<value>time</value> 指令里的指定时间来算出。
</para>

<para>
除此之外，可以使用前缀(0.7.9, 0.6.34)
“<literal>@</literal>” :来指定一天的时间。
<example>
expires @15h30m;
</example>
</para>

<para>
<literal>epoch</literal> 参数对应于绝对时间
“<literal>Thu, 01 Jan 1970 00:00:01 GMT</literal>”.
<header>Cache-Control</header> 
域的内容取决于指定时间的正负符号：
<list type="bullet">

<listitem>
时间是负的 — <header>Cache-Control: no-cache</header>.
</listitem>

<listitem>
时间是正的或者是0-
<header>Cache-Control: max-age=<value>t</value></header>,
 <value>t</value> 是在指令中指定的时间，以秒计。
</listitem>

</list>
</para>

<para>
<literal>max</literal>  参数设置 <header>Expires</header>
值为 “<literal>Thu, 31 Dec 2037 23:55:55 GMT</literal>”,
并将<header>Cache-Control</header> 设置为10年。
</para>

<para>
<literal>off</literal> 参数禁止增加或者修改
<header>Expires</header> 和<header>Cache-Control</header> 响应头域。
</para>

</directive>

</section>

</module>
